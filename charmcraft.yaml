# This file configures Charmcraft.
# See https://juju.is/docs/sdk/charmcraft-config for guidance.

name: datahub-k8s
type: charm
title: DataHub
summary: DataHub operator
description: |
  DataHub is an extensible data catalog that enables data discovery, data observability
  and federated data governance.

  DataHub provides a service that can integrate with metadata sources such as PostgreSQL
  and Kafka after which metadata such as tables, topics, schema and lineage is gathered
  and served.

  It is useful for keeping track of schema, ownership and dependency information in data
  warehouses and pipelines.


assumes:
  - juju >= 3.3


bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
      architectures:
      - amd64
    run-on:
    - name: ubuntu
      channel: "22.04"
      architectures:
      - amd64


# TODO (mertalpt): Add dependencies as relations.
peers:
  peer:
    interface: datahub

# (Optional) Configuration options for the charm
# This config section defines charm config options, and populates the Configure
# tab on Charmhub.
# More information on this section at https://juju.is/docs/sdk/charmcraft-yaml#heading--config
# General configuration documentation: https://juju.is/docs/sdk/config
config:
  options:
    # An example config option to customise the log level of the workload
    log-level:
      description: |
        Configures the log level of gunicorn.

        Acceptable values are: "info", "debug", "warning", "error" and "critical"
      default: "info"
      type: string


# The containers and resources metadata apply to Kubernetes charms only.
# See https://juju.is/docs/sdk/metadata-reference for a checklist and guidance.

# Your workloadâ€™s containers.
containers:
  datahub-actions:
    resource: datahub-actions
  datahub-frontend:
    resource: datahub-frontend
  datahub-gms:
    resource: datahub-gms
  datahub-mae-consumer:
    resource: datahub-mae-consumer
  datahub-mce-consumer:
    resource: datahub-mce-consumer


# This field populates the Resources tab on Charmhub.
resources:
  datahub-actions:
    type: oci-image
    description: OCI image for DataHub Actions
    upstream-source: acryldata/datahub-actions:v0.0.15
  datahub-frontend:
    type: oci-image
    description: OCI image for DataHub Frontend
    upstream-source: acryldata/datahub-frontend-react:v0.13.3
  datahub-gms:
    type: oci-image
    description: OCI image for DataHub GMS
    upstream-source: acryldata/datahub-gms:v0.13.3
  datahub-mae-consumer:
    type: oci-image
    description: OCI image for DataHub MAE Consumer
    upstream-source: acryldata/datahub-mae-consumer:v0.13.3
  datahub-mce-consumer:
    type: oci-image
    description: OCI image for DataHub MCE Consumer
    upstream-source: acryldata/datahub-mce-consumer:v0.13.3
